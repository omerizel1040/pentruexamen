#include <iostream>
#include <vector>
#include <string>

using namespace std;

class Ingredient {
private:
	const int cod;
	string denumire;
	int stoc;
	bool esteAlergen;

public:
	// constructor cu parametri
	Ingredient(int c, string d, int s, bool a)
		: cod(c), denumire(d), stoc(s), esteAlergen(a) {
	}

	// constructor de copiere
	Ingredient(const Ingredient& i)
		: cod(i.cod), denumire(i.denumire), stoc(i.stoc), esteAlergen(i.esteAlergen) {
	}

	// operator =
	Ingredient& operator=(const Ingredient& i) {
		if (this != &i) {
			this->denumire = i.denumire;
			this->stoc = i.stoc;
			this->esteAlergen = i.esteAlergen;
			// cod NU se copiazÄƒ (const)
		}
		return *this;
	}

	// i1 - 10
	Ingredient operator-(int cantitate) const {
		Ingredient rez(*this);
		if (rez.stoc >= cantitate)
			rez.stoc -= cantitate;
		return rez;
	}

	// 10 + i2
	friend Ingredient operator+(int cantitate, const Ingredient& i) {
		Ingredient rez(i);
		rez.stoc += cantitate;
		return rez;
	}

	string getDenumire() const {
		return denumire;
	}

	friend ostream& operator<<(ostream& out, const Ingredient& i) {
		out << "\nCod: " << i.cod
			<< " | Denumire: " << i.denumire
			<< " | Stoc: " << i.stoc
			<< " | Alergen: " << (i.esteAlergen ? "DA" : "NU");
		return out;
	}
};

class Reteta {
private:
	vector<Ingredient> ingrediente;
public:
	Reteta() {

	}
	void adaugaIngredient(const Ingredient& i) {
		for (int j = 0; j < ingrediente.size(); j++) {
			if (ingrediente[j].getDenumire() == i.getDenumire())
				return; // deja exista
		}
		ingrediente.push_back(i);
	}
	bool operator!=(const string& den) const {
		for (int i = 0; i < ingrediente.size(); i++) {
			if (ingrediente[i].getDenumire() == den)
				return false;
		}
		return true;
	}
	friend ostream& operator<<(ostream& out, const Reteta& r) {
		out << "\n--- RETETA ---";
		for (int i = 0; i < r.ingrediente.size(); i++) {
			out << r.ingrediente[i];
		}
		return out;
	}
};

int main() {

	Ingredient i1(102, "Faina", 100, true);
	Ingredient i2 = i1;

	i2 = i1 - 10;
	i1 = 10 + i2;

	cout << i1;

	Reteta r1;
	r1.adaugaIngredient(i1);
	r1.adaugaIngredient(Ingredient(200, "Zahar", 50, false));

	
	cout << r1;
	cout << endl;
	if (r1 != "faina")
		cout << "\nIngredientul faina nu se gaseste in reteta curenta";

	return 0;
}
